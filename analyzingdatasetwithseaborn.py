# -*- coding: utf-8 -*-
"""AnalyzingDatasetWithSeaborn.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/103b7UOlKudGPWgPWpPEOvjNy5-Nv5lEI

**Maestría en Inteligencia Artificial y Analítica de Datos**

Curso: *Programación para Analítica Descriptiva y Predictiva*.

* Semestre: Enero-Junio 2026.
* Profesor: Dr. Vicente García Jiménez.
* Alumno: Ricardo Solano Monje.
* Matrícula: 266221.
* Unidad 1.
* Práctica 8: Manejo de librería Seaborn. Utilizar el dataset de "tips".
* Objetivo de la práctica: Este ejercicio tiene como objetivo que los estudiantes aprendan a trabajar con seaborn para crear visualizaciones más avanzadas utilizando gráficos como el mapa de calor y el diagrama de violín. También, se les anima a explorar el dataset, hacer análisis descriptivos y aprender a interpretar los resultados.
* Realizado por: Ricardo Solano Monje.

### Parte 1: Revisión de Videos para Seaborn y Matplotlib

* Haz clic en los recursos de esta semana para acceder al video

* Asegúrate de ver todo el video de principio a fin.

* Toma notas sobre los puntos clave que se abordan en el video.

* Reflexiona sobre las técnicas o conceptos mostrados en el video y cómo se aplican a la materia.

* Para Seaborn accede al video: https://youtu.be/lqYMhghp5T0?si=t0LZhTu3XVcQZ7sh
* Para Matplotlib accede al video: https://youtu.be/gyQmdUV5jIU?si=t-vaTd6G3Y8SxV_z

### Formato y personalización de los gráficos:

* Personaliza cada gráfico con títulos, etiquetas en los ejes y leyendas cuando sea necesario.

* Experimenta con diferentes colores, estilos y tamaños para hacer que las visualizaciones sean claras y atractivas.

* Si es posible, mostrar dos graficos uno al lado del otro a manera de comparación de las opciones de configuración.

# 1. Carga y exploración del dataset:

Utilizar el dataset de "tips" de seaborn, que contiene información sobre las propinas que dejaron los clientes en un restaurante, junto con detalles sobre el total de la cuenta, el día de la semana, si fue almuerzo o cena, entre otros.

* Cargar el dataset *tips* usando seaborn.

* Realizar un análisis preliminar: utiliza .head(), .info(), .describe() para obtener una visión general de los datos.

* Verificar la existencia de valores nulos o datos faltantes.
"""

# %% Import libraries
import seaborn as sns
import pandas as pd
import matplotlib.pyplot as plt

# %% Load dataset function
def load_data():
    """Load the tips dataset from Seaborn."""
    return sns.load_dataset("tips")

# %% Data analysis functions
def preliminary_analysis(df):
    """Perform preliminary analysis on the dataset."""
    print("=" * 50)
    print("DATASET PREVIEW (first 5 rows):")
    print("=" * 50)
    print(df.head())

    print("\n" + "=" * 50)
    print("DATASET INFORMATION:")
    print("=" * 50)
    print(df.info())

    print("\n" + "=" * 50)
    print("STATISTICAL SUMMARY:")
    print("=" * 50)
    print(df.describe())

def check_missing_data(df):
    """Check for null or missing values in the dataset."""
    print("\n" + "=" * 50)
    print("MISSING VALUES CHECK:")
    print("=" * 50)

    # Check total missing values
    missing_total = df.isnull().sum().sum()
    print(f"Total missing values in dataset: {missing_total}")

    # Check missing values by column
    missing_by_column = df.isnull().sum()
    if missing_by_column.sum() > 0:
        print("\nMissing values by column:")
        print(missing_by_column[missing_by_column > 0])
    else:
        print("✓ No missing values found in any column!")


def main():
    """Main function to execute the analysis."""
    # Load data
    tipsDf = load_data()

    # Perform analysis
    preliminary_analysis(tipsDf)
    check_missing_data(tipsDf)

    return tipsDf

# %% Execute if run as script
if __name__ == "__main__":
    tipsDf = main()

"""# 2. Crear los siguientes gráficos con Seaborn.

**Nota**: Se han realizado al menos tres variantes de cada uno de los incisos de gráficos solicitados a manera de realizar la exploración de opciones de claridad y atractivo recomendadas al inicio de este trabajo.

## a) Mapa de Calor (Heatmap):

**Objetivo:** Visualizar la correlación entre las variables numéricas en el dataset.

**Instrucciones:** Utiliza un mapa de calor para mostrar la matriz de correlación entre las variables numéricas (total_bill, tip, size).

Asegúrate de personalizar el mapa con una paleta de colores y etiquetas en los ejes.
"""

# Heatmap as simple as shown in Youtube video! (Parte 1: Revisión del Video)
num_col=tipsDf.select_dtypes(include=['number']).columns
corr=tipsDf[num_col].corr()
sns.heatmap(corr, annot=True, cmap='coolwarm', fmt='.2f',linewidths=0.5)
plt.title('Correlation matrix')
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

df = sns.load_dataset('tips')
corr = df[['total_bill', 'tip', 'size']].corr()

plt.figure(figsize=(6, 4))
sns.heatmap(corr, annot=True, cmap='viridis')
plt.title('Correlation Heatmap')
plt.tight_layout()
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

# Load and prepare data
df = sns.load_dataset("tips")
corr = df[['total_bill', 'tip', 'size']].corr()

# Single highly customized heatmap
plt.figure(figsize=(8, 6))
sns.heatmap(
    corr,
    annot=True,
    cmap='RdBu_r',
    center=0,
    linewidths=0.5,
    square=True,
    cbar_kws={'label': 'Correlation Coefficient'}
)

plt.title('Correlation Matrix: Tips Dataset', fontsize=14, pad=20)
plt.xticks(rotation=45)
plt.yticks(rotation=0)
plt.tight_layout()
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd

# Load data
df = sns.load_dataset("tips")

# Get correlation matrix
corr = df[['total_bill', 'tip', 'size']].corr()

# Create figure with two subplots side by side
fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Chart 1: Default heatmap
sns.heatmap(corr, ax=axes[0])
axes[0].set_title('Default Heatmap')

# Chart 2: Customized heatmap
sns.heatmap(
    corr,
    annot=True,  # Show values in cells
    fmt='.2f',   # Format to 2 decimal places
    cmap='coolwarm',  # Color palette
    linewidths=1,  # Lines between cells
    square=True,  # Make cells square
    cbar_kws={'shrink': 0.8},  # Color bar size
    ax=axes[1]
)
axes[1].set_title('Customized Heatmap')

plt.tight_layout()
plt.show()

"""## b) Diagrama de Violín:

**Objetivo:** Mostrar la distribución de las propinas (tip) para diferentes días de la semana.

**Instrucciones:** Utiliza un diagrama de violín para comparar cómo varía la distribución de las propinas en cada uno de los días.
Personaliza el gráfico con colores y etiquetas adecuadas.
"""

# Violiin plot as simple as shown in Youtube video! (Parte 1: Revisión del Video)
# fixing original example from video
# Original instruction, deprecated call:  sns.violinplot(x='day',y='tip', data=tipsDf, palette='muted')


# Corrected call for future compatibility: Assign the `x` variable to `hue` and set `legend=False` for the same effect.

sns.violinplot(x='day',y='tip', data=tipsDf, hue='day', palette='muted', legend=False)

plt.title('Distribution of tips per day from diners')
#plt.xlabel('Day')
#plt.ylabel('Tip')
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

df = sns.load_dataset('tips')
plt.figure(figsize=(8, 5))
sns.violinplot(data=df, x='day', y='tip', hue='day', palette='muted', legend=False)
plt.title('Tips by Day')
plt.tight_layout()
plt.xlabel('Day')# customized x label, by default in lower case
plt.ylabel('Tip')# customized y label, by default in lower case
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

# Load data
df = sns.load_dataset('tips')

# Create figure with two subplots
fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Chart 1: Basic violin plot
sns.violinplot(data=df, x='day', y='tip', hue='day', palette='muted', legend=False, ax=axes[0])
axes[0].set_title('Basic Violin Plot')

# Chart 2: Customized violin plot
sns.violinplot(
    data=df,
    x='day',
    y='tip',
    hue='day',
    palette='Set2',# Color palette
    legend=False,
    inner='quartile',  # Show quartiles inside
    linewidth=1.5,  # Line thickness
    ax=axes[1]
)
axes[1].set_title('Customized Violin Plot')
axes[1].set_xlabel('Day of Week')
axes[1].set_ylabel('Tip Amount ($)')

plt.tight_layout()
plt.show()

"""## An extra plot, comparing side by side Box plot vs Violin plot

*Visually seems to be more appealing Violin plots, however Box plots appear to me a more formal (Math) approach.*

After reading a few notes about both plots, I have come to know the following  about Box Plots vs Violin Plots:

**Box Plots** (More "Formal/Math"): *Box plots are your reliable, no-nonsense statistician friend.*

*Pros*:

* Shows exact quartiles (Q1, Q2/median, Q3)

* Clear outliers detection (beyond 1.5×IQR)

* Standardized in statistics/research papers

* Precise, non-parametric

* Better for comparing medians and IQRs

*Cons*:

* Hides the actual distribution shape

* Loses density information

* Can mislead with multimodal distributions


**Violin Plots** (More "Visual/Exploratory"): *Violin plots are your creative, storytelling artist friend.*

*Pros*:

* Shows full distribution shape

* Reveals multimodality, skewness, kurtosis

* More visually appealing/intuitive

* Combines KDE with box plot elements

*Cons*:

* Less precise for statistical tests

* Bandwidth selection affects shape

* Can be misleading with small samples

* Less common in formal publications

### For exploratory analysis/communication: Violin plots win

* Clients/stakeholders understand them better

* Visual appeal matters in presentations

* Reveals patterns box plots hide

### For formal research/statistics: Box plots win

* Required in many academic journals

* Precise, unambiguous metrics

* Standard for hypothesis testing

* Better for statistical comparisons

### When to use which:

*Use Box Plot when*:

* Publishing in academic journals

Running formal statistical tests

* Need precise quartile values

* Comparing medians across groups

*Use Violin Plot when*:

* Exploring data patterns

* Presenting to non-technical audiences

* Need to show distribution shape

* Suspecting multimodal distributions

"""

import seaborn as sns
import matplotlib.pyplot as plt

# Load data
df = sns.load_dataset('tips')

# Create figure with two subplots
fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Chart 1: Basic violin plot
sns.boxplot(data=df, x='day', y='tip', hue='day', palette='muted', legend=False, ax=axes[0])
axes[0].set_title('Customized Box Plot')
axes[0].set_xlabel('Day of Week')
axes[0].set_ylabel('Tip Amount ($)')

# Chart 2: Customized violin plot
sns.violinplot(
    data=df,
    x='day',
    y='tip',
    hue='day',
    palette='Set2',# Color palette
    legend=False,
    inner='quartile',  # Show quartiles inside
    linewidth=1.5,  # Line thickness
    ax=axes[1]
)
axes[1].set_title('Customized Violin Plot')
axes[1].set_xlabel('Day of Week')
axes[1].set_ylabel('Tip Amount ($)')

plt.tight_layout()
plt.show()

"""## c) Gráfico de dispersión (Scatter Plot):

**Objetivo**: Analizar la relación entre el total de la cuenta (total_bill) y la propina (tip).

**Instrucciones**: Crea un gráfico de dispersión con total_bill en el eje X y tip en el eje Y. Usa un color diferente para cada día de la semana.
"""

import seaborn as sns
import matplotlib.pyplot as plt

df = sns.load_dataset('tips')
plt.figure(figsize=(8, 5))
sns.scatterplot(data=df, x='total_bill', y='tip', hue='day')
plt.title('Total Bill vs Tip for Each Day of the Week')
plt.tight_layout()
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

# Load data
df = sns.load_dataset('tips')

# Create figure with two subplots
fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Chart 1: Basic scatter plot
sns.scatterplot(data=df, x='total_bill', y='tip', hue='day', ax=axes[0])
axes[0].set_title('Basic Scatter Plot')

# Chart 2: Customized scatter plot
sns.scatterplot(
    data=df,
    x='total_bill',
    y='tip',
    hue='day',
    palette='Set2',
    s=60,  # Marker size
    alpha=0.7,  # Transparency
    ax=axes[1]
)
axes[1].set_title('Total Bill vs Tip by Day')
axes[1].set_xlabel('Total Bill ($)')
axes[1].set_ylabel('Tip ($)')
axes[1].legend(title='Day', bbox_to_anchor=(1.05, 1), loc='upper left')

plt.tight_layout()
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

df = sns.load_dataset('tips')

plt.figure(figsize=(10, 6))
sns.scatterplot(
    data=df,
    x='total_bill',
    y='tip',
    hue='day',
    style='day',  # Different markers for each day
    palette='husl',
    s=80,
    alpha=0.8
)

plt.title('Relationship: Total Bill vs Tip by Day', fontsize=14, pad=15)
plt.xlabel('Total Bill Amount ($)', fontsize=12)
plt.ylabel('Tip Amount ($)', fontsize=12)
plt.grid(True, alpha=0.3, linestyle='--')
plt.legend(title='Day of Week', bbox_to_anchor=(1.05, 1), loc='upper left')

plt.tight_layout()
plt.show()

"""## d) Gráfico de barras (Bar Plot):

Objetivo: Comparar el promedio de la propina (tip) por género (sex).
Instrucciones: Utiliza un gráfico de barras para mostrar el promedio de las propinas por género (hombres y mujeres).
Formato y personalización de los gráficos:
"""

import seaborn as sns
import matplotlib.pyplot as plt

df = sns.load_dataset('tips')
plt.figure(figsize=(6, 4))
sns.barplot(data=df, x='sex', y='tip')
plt.title('Tips by Gender')
plt.tight_layout()
plt.show()

# Bars graph as simple as shown in Youtube video! (Parte 1: Revisión del Video) fixing example from video
# Original, deprecated call: sns.barplot(x='sex', y='tip', data=tipsDf, palette='pastel')

#Corrected call for future compatibility: Assign the `x` variable to `hue` and set `legend=False` for the same effect.

sns.barplot(x='sex', y='tip', data=tipsDf, hue='sex', palette='pastel', legend=False)
plt.title('Tip rate')
plt.xlabel('Gender')
plt.ylabel('Tip')
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

# Load data
df = sns.load_dataset('tips')

# Create figure with two subplots
fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Chart 1: Basic bar chart
sns.barplot(data=df, x='sex', y='tip',  hue='sex', palette='muted', legend=False, ax=axes[0])
axes[0].set_title('Basic Bar Chart')

# Chart 2: Customized bar chart
sns.barplot(
    data=df,
    x='sex',
    y='tip',
    hue='sex',
    palette='viridis',
    legend=False,
    errorbar=None,  # Remove error bars
    ax=axes[1]
)
axes[1].set_title('Average Tip by Gender')
axes[1].set_xlabel('Gender')
axes[1].set_ylabel('Average Tip ($)')

plt.tight_layout()
plt.show()

import seaborn as sns
import matplotlib.pyplot as plt

df = sns.load_dataset('tips')

plt.figure(figsize=(8, 5))
ax = sns.barplot(data=df, x='sex', y='tip', hue='sex', legend=False,palette='viridis')

plt.title('Average Tip by Gender')
plt.xlabel('Gender')
plt.ylabel('Tip ($)')

# Add centered value labels
for i, bar in enumerate(ax.patches):
    ax.text(bar.get_x() + bar.get_width()/2,
            bar.get_height() + 0.05,
            f"${bar.get_height():.2f}",
            ha='center', fontsize=10)

plt.tight_layout()
plt.show()

